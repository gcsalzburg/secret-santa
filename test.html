<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<title>secret-santa</title>
		<script language="javascript" src="js/lz-string.min.js"></script>
	</head>
	<body>
		<p>Url: <span id="compressed"></span></p>
		<p>Raw: <span id="uncompressed"></span></p>
		
		<script>
				// https://pieroxy.net/blog/pages/lz-string/demo.html
				// https://github.com/pieroxy/lz-string
	
	
	
				var names_array = ["George","Erinna","FranÃ§oise","Steve","Abi","Dylan","Sam"];
				var names = names_array.join("/");

				var num_names = names_array.length;
				var mapping = Array.from(Array(num_names),(e,i)=>i+1);
				var shuffled = shuffle_no_repeat(mapping);

				var uncompressed_string = names + "|" + shuffled.join("/");
	
			//	var compressed = "v1"+LZString.compressToEncodedURIComponent(uncompressed_string);
			//	var uncompressed = LZString.decompressFromEncodedURIComponent(compressed.slice(2));
				var compressed = "v1."+btoa(uncompressed_string);
				var uncompressed = atob(compressed.slice(3));
				document.getElementById("compressed").innerHTML = compressed;
				document.getElementById("uncompressed").innerHTML = uncompressed;
	
				function shuffle_no_repeat(a){
					var loops=0;
					do {
						console.log(shuffle(a));
						loops++;
					} while (check(a));

					console.log(loops);
					return a;
				}

				function shuffle(a) {
					var j, x, i;
					for (i = a.length - 1; i > 0; i--) {
						j = Math.floor(Math.random() * (i + 1));
						x = a[i];
						a[i] = a[j];
						a[j] = x;
					}
					return a;
				}
				function check(a){
					for(i = 0; i<a.length; i++){
						if(a[i] == i){
							return false;
						}
					}
					return true;
				}				
	
			</script>
	</body>
</html>